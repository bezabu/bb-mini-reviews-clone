(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{101:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),n=t(27),r=t.n(n),o=(t(68),t(15)),i=t.n(o),l=t(35),d=t(63),j=t(19),m=t.p+"static/media/film_logo.7aa34753.png",u=t(8),p=t.n(u),b=t(10),h=t(11),x=t.n(h);x.a.defaults.baseURL="/api",x.a.defaults.headers.post["Content-Type"]="multipart/form-data",x.a.defaults.withCredentials=!0;const O=x.a.create(),v=x.a.create();var g=t(29),A=t(1);const N=Object(s.createContext)(),C=Object(s.createContext)(),f=()=>Object(s.useContext)(C),B=e=>{let{children:a}=e;const[t,c]=Object(s.useState)(null),n=Object(g.useHistory)();return Object(s.useEffect)((()=>{(async()=>{try{console.log("get current user");const{data:e}=await v.get("/dj-rest-auth/user/");c(e)}catch(e){console.log(e)}})()}),[]),Object(s.useMemo)((()=>{O.interceptors.request.use((async e=>{try{console.log("attempt refresh"),await x.a.post("/dj-rest-auth/token/refresh/")}catch{return c((e=>(e&&n.push("/signin"),null))),e}return e}),(e=>Promise.reject(e))),v.interceptors.response.use((e=>e),(async e=>{var a;if(401===(null===(a=e.response)||void 0===a?void 0:a.status)){try{console.log("attempt refresh"),await x.a.post("/dj-rest-auth/token/refresh/")}catch(e){c((e=>(e&&n.push("/signin"),null)))}return x()(e.config)}return Promise.reject(e)}))}),[n]),Object(A.jsx)(N.Provider,{value:t,children:Object(A.jsx)(C.Provider,{value:c,children:a})})};var w=t(57),y=t.n(w);var _=e=>{let{src:a,height:t=45,text:s}=e;return Object(A.jsxs)("span",{children:[Object(A.jsx)("img",{className:y.a.Avatar,src:a,height:t,width:t,alt:"avatar"}),s]})};var L=()=>{const[e,a]=Object(s.useState)(!1),t=Object(s.useRef)(null);return Object(s.useEffect)((()=>{const e=e=>{t.current&&!t.current.contains(e.target)&&a(!1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[t]),{expanded:e,setExpanded:a,ref:t}};var k=()=>{const e=Object(s.useContext)(N),a=f(),{expanded:t,setExpanded:c,ref:n}=L(),r=Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/movies/create",children:[Object(A.jsx)("i",{class:"fa-solid fa-film"}),"Add review"]}),o=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/signin",children:[Object(A.jsx)("i",{className:"fa-solid fa-right-to-bracket"}),"Sign in"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/signup",children:[Object(A.jsx)("i",{className:"fa-solid fa-user-plus"}),"Sign up"]})]}),i=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/feed",children:[Object(A.jsx)("i",{class:"fa-solid fa-ticket"}),"Feed"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/feed",children:[Object(A.jsx)("i",{class:"fa-solid fa-video"}),"New"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/new",children:[Object(A.jsx)("i",{class:"fa-solid fa-star"}),"Popular"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/new",children:[Object(A.jsx)("i",{class:"fa-solid fa-heart"}),"Liked"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,to:"/",onClick:async()=>{try{await x.a.post("dj-rest-auth/logout/"),a(null)}catch(e){console.log(e)}},children:[Object(A.jsx)("i",{class:"fa-solid fa-right-from-bracket"}),"Sign out"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),onClick:()=>{},children:[Object(A.jsx)(_,{src:null===e||void 0===e?void 0:e.profile_image,height:40}),null===e||void 0===e?void 0:e.username]})]});return Object(A.jsxs)(l.a,{expanded:t,className:p.a.NavBar,bg:"light",expand:"md",fixed:"top",children:[Object(A.jsx)(b.c,{to:"/",children:Object(A.jsx)(l.a.Brand,{children:Object(A.jsxs)(j.a,{children:[Object(A.jsx)("img",{src:m,alt:"film logo",height:"50"}),Object(A.jsx)("h1",{children:"Movie Reviews"})]})})}),e&&r,Object(A.jsx)(l.a.Toggle,{ref:n,onClick:()=>c(!t),"aria-controls":"basic-navbar-nav"}),Object(A.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(A.jsxs)(d.a,{className:"ml-auto text-left",children:[Object(A.jsxs)(b.c,{exact:!0,className:p.a.NavLink,activeClassName:p.a.Active,to:"/",children:[Object(A.jsx)("i",{className:"fa-solid fa-house"}),"Home"]}),Object(A.jsxs)(b.c,{className:p.a.NavLink,activeClassName:p.a.Active,to:"/movies",children:[Object(A.jsx)("i",{class:"fa-solid fa-clapperboard"}),"Movies"]}),e?i:o]})})]})},S=t(7),I=t(17),F=t.n(I),U=t(16),E=t.n(U),M=t(39),T=t(23),Q=t(6),G=t(41),R=t(34);var q=()=>{var e,a,t,c;const[n,r]=Object(s.useState)({username:"",password1:"",password2:""}),{username:o,password1:l,password2:d}=n,[m,u]=Object(s.useState)({}),p=Object(S.useHistory)(),h=e=>{r({...n,[e.target.name]:e.target.value})};return Object(A.jsx)(M.a,{className:F.a.Row,children:Object(A.jsxs)(T.a,{md:6,children:[Object(A.jsxs)(j.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(A.jsx)("h1",{className:F.a.Header,children:"sign up"}),Object(A.jsxs)(Q.a,{onSubmit:async e=>{e.preventDefault();try{await x.a.post("dj-rest-auth/registration/",n),p.push("/signin")}catch(t){var a;u(null===(a=t.response)||void 0===a?void 0:a.data)}},children:[Object(A.jsxs)(Q.a.Group,{controlId:"username",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"username"}),Object(A.jsx)(Q.a.Control,{className:F.a.Input,type:"text",placeholder:"username",name:"username",value:o,onChange:h})]}),null===(e=m.username)||void 0===e?void 0:e.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",children:e},a))),Object(A.jsxs)(Q.a.Group,{controlId:"password1",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"password"}),Object(A.jsx)(Q.a.Control,{className:F.a.Input,type:"password",placeholder:"Password",name:"password1",value:l,onChange:h})]}),null===(a=m.password1)||void 0===a?void 0:a.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",children:e},a))),Object(A.jsxs)(Q.a.Group,{controlId:"password2",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"confirm password"}),Object(A.jsx)(Q.a.Control,{className:F.a.Input,type:"password",placeholder:"confirm assword",name:"password2",value:d,onChange:h})]}),null===(t=m.password2)||void 0===t?void 0:t.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",children:e},a))),Object(A.jsx)(R.a,{className:"".concat(E.a.Button," ").concat(E.a.Wide),type:"submit",children:"Sign up"}),null===(c=m.non_field_errors)||void 0===c?void 0:c.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",className:"mt-3",children:e},a)))]})]}),Object(A.jsx)(j.a,{className:"mt-3 ".concat(i.a.Content),children:Object(A.jsxs)(b.b,{className:F.a.Link,to:"/signin",children:["Already have an account? ",Object(A.jsx)("span",{children:"Sign in"})]})})]})})},H=t(60);var P=function(){var e,a,t;const c=f(),[n,r]=Object(s.useState)({username:"",password:""}),{username:o,password:l}=n,[d,m]=Object(s.useState)({}),u=Object(S.useHistory)(),p=e=>{r({...n,[e.target.name]:e.target.value})};return Object(A.jsxs)(M.a,{className:F.a.Row,children:[Object(A.jsxs)(T.a,{className:"my-auto p-0 p-md-2",md:6,children:[Object(A.jsxs)(j.a,{className:"".concat(i.a.Content," p-4 "),children:[Object(A.jsx)("h1",{className:F.a.Header,children:"sign in"}),Object(A.jsxs)(Q.a,{onSubmit:async e=>{e.preventDefault();try{console.log("sign in");const{data:e}=await x.a.post("/dj-rest-auth/login/",n);c(e.user),u.push("/")}catch(t){var a;m(null===(a=t.response)||void 0===a?void 0:a.data)}},children:[Object(A.jsxs)(Q.a.Group,{controlId:"username",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Username"}),Object(A.jsx)(Q.a.Control,{type:"text",placeholder:"Username",name:"username",className:F.a.Input,value:o,onChange:p})]}),null===(e=d.username)||void 0===e?void 0:e.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",children:e},a))),Object(A.jsxs)(Q.a.Group,{controlId:"password",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Password"}),Object(A.jsx)(Q.a.Control,{type:"password",placeholder:"Password",name:"password",className:F.a.Input,value:l,onChange:p})]}),null===(a=d.password)||void 0===a?void 0:a.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",children:e},a))),Object(A.jsx)(R.a,{className:"".concat(E.a.Button," ").concat(E.a.Wide," ").concat(E.a.Bright),type:"submit",children:"Sign in"}),null===(t=d.non_field_errors)||void 0===t?void 0:t.map(((e,a)=>Object(A.jsx)(G.a,{variant:"warning",className:"mt-3",children:e},a)))]})]}),Object(A.jsx)(j.a,{className:"mt-3 ".concat(i.a.Content),children:Object(A.jsxs)(b.b,{className:F.a.Link,to:"/signup",children:["Don't have an account? ",Object(A.jsx)("span",{children:"Sign up now!"})]})})]}),Object(A.jsx)(T.a,{md:6,className:"my-auto d-none d-md-block p-2 ".concat(F.a.SignInCol),children:Object(A.jsx)(H.a,{className:"".concat(i.a.FillerImage),src:"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg"})})]})},D=t(62),X=t.n(D),V=t(33),K=t.n(V),Z=t(103),Y=t(61),J=t.n(Y);var W=e=>{let{spinner:a,src:t,message:s}=e;return Object(A.jsxs)("div",{className:"".concat(J.a.Asset," p-4"),children:[a&&Object(A.jsx)(Z.a,{animation:"border"}),t&&Object(A.jsx)("img",{src:t,alt:s}),s&&Object(A.jsx)("p",{className:"mt-4",children:s})]})};var z=function(){const[e,a]=Object(s.useState)({}),[t,c]=Object(s.useState)({title:"",year:"",director:"",actors:"",image:""}),{title:n,year:r,director:o,actors:l,image:d}=t,m=Object(s.useRef)(null),u=Object(g.useHistory)(),p=e=>{c({...t,[e.target.name]:e.target.value})},b=Object(A.jsxs)("div",{className:"text-center",children:[Object(A.jsx)(R.a,{className:"".concat(E.a.Button," ").concat(E.a.Blue),onClick:()=>{},children:"cancel"}),Object(A.jsx)(R.a,{className:"".concat(E.a.Button," ").concat(E.a.Blue),type:"submit",children:"create"})]});return Object(A.jsx)(Q.a,{onSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("title",n),t.append("year",r),t.append("director",o),t.append("actors",l),t.append("image",m.current.files[0]);try{console.log("attempt movie create");const{data:e}=await O.post("/movies/add/",t);console.log(e),u.push("/movies/".concat(e.id))}catch(i){var s,c;if(console.log(i),401!==(null===(s=i.response)||void 0===s?void 0:s.status))a(null===(c=i.response)||void 0===c?void 0:c.data)}},children:Object(A.jsxs)(M.a,{children:[Object(A.jsx)(T.a,{className:"py-2 p-0 p-md-2",md:7,lg:8,children:Object(A.jsxs)(j.a,{className:"".concat(i.a.Content," ").concat(K.a.Container," d-flex flex-column justify-content-center"),children:[Object(A.jsxs)(Q.a.Group,{className:"",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Title"}),Object(A.jsx)(Q.a.Control,{type:"text",placeholder:"title",name:"title",className:K.a.Input,value:n,onChange:p})]}),Object(A.jsxs)(Q.a.Group,{className:"",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Year"}),Object(A.jsx)(Q.a.Control,{type:"year",placeholder:"year",name:"year",className:K.a.Input,value:r,onChange:p})]}),Object(A.jsxs)(Q.a.Group,{className:"",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Director"}),Object(A.jsx)(Q.a.Control,{type:"director",placeholder:"director",name:"director",className:K.a.Input,value:o,onChange:p})]}),Object(A.jsxs)(Q.a.Group,{className:"",children:[Object(A.jsx)(Q.a.Label,{className:"d-none",children:"Actors"}),Object(A.jsx)(Q.a.Control,{type:"actors",placeholder:"actors",name:"actors",className:K.a.Input,value:l,onChange:p})]}),Object(A.jsxs)(Q.a.Group,{className:"text-center",children:[d?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("figure",{children:Object(A.jsx)(H.a,{className:i.a.Image,src:d,rounded:!0})}),Object(A.jsx)("div",{children:Object(A.jsx)(Q.a.Label,{className:"".concat(E.a.Button," ").concat(E.a.Blue," btn"),htmlFor:"image-upload",children:"Change the image"})})]}):Object(A.jsx)(Q.a.Label,{className:"d-flex justify-content-center",htmlFor:"image-upload",children:Object(A.jsx)(W,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUmSURBVHgB7Z1NbxtFGMf/M7Nre3HitElRoLIlDiBFFbdIVKVCKh+AU8sXqNo7Uk+cEOJKvwEfAAV6KhfEASREoyJya0tQg1TJbqUc6qS1E6/3bZixcbp2nZdN7J3d5vlJq/V6d63o+e28O34YToiUkn0KiA3Ant8Ed1oQXQs85GC+AC+z/j5+j+1CIIP4JYTxYy94dVzyEXplBFYEubuIoAqEv6qNMSZxAhgSogNeU3/PuScoRg4KWQ1matjwQw+BY6FbrcL7gbEwye1HFnBBysLMU8yGAQog9mXHgndWYne1xjpHuf5QART441FU1de2i+1HHzLvoOsOFLD8l5zDObwF4ti0XbT/WWKt/c6PFaDr+YtPMU9P/WTY6cBbX0ITYxpsPu4GCv5kKavOytI65sede03A5XVJ9f0U0BLefywro+8PCdANrlvCDIipMGejfOGBHHq4hwSc+RdnQEyVSGA2frwn4FJdOmoEe7oHVSmgq6J4KdgTEDLqbqZFvBT0BHwupaCGNz10KVB9/d4QoCeg0aDgp021gZLe9wR0AhRBpMpiuf/Q9wSwQM3pEaniN/sPPcdXknMbFohUsXWPU7UDfPkz6nqa4opayOLPF0iAKTYasHnFIQGmWFTLtjzgyZcliclQKqgqyKHpB2O4ApyLXeoBmUJN/zAOwhheW5UAEMZQ7S/n7mn/Xo9BSh0qAcYhAYYhAYbhNo0DjKFjTyXAMCTAMCTAMCTAMCTAMLkVEESo+R7u6y3kqCKn5FKADr4M8CMkanqLXNzJq4TcCRgK/oAcS8iVgJHg12On6nmVkBsBo8HnFq4Ozqk11WvIqYRcCBgXfCHQGJy3iqjnVULmBRwW/AF5lZB5AdLHjcOCP+A1CV3cQsbJ/IK8sLASRqiopaPbBwV/gJYQdHEtAm5YEVaQcdjyE/kucorfxTO9t4s4j5xCUxGGIQGGIQGGIQGGIQGGIQGGyZSArZs/3dcbpsS0P/84ZGogJkNZS3hLPcnFx/j8qZPrr6arAdhF5BxqAwxDAgxDAgyTSQHt359VcErIlABmi3t6H9x5eBMTxFdCt7/4pbc2IAV7iAyRqV6QeG/udvC4+XH00r3VvH53Kosp/J25b5EhMlUCKl9eXrVqlevMmvxTymx+z/pg/urZbz75GRki1wsybwLUCzIMCTAMCTAMCTAMCTAM9wMkyvhATA4deyoBhiEBhiEBhuFC4kRpmIjjExQRcNtBBMIYXGxTCTAJ985TN9QUTll1Q63nVAJM0dHjgM4slQBTOD4i3vSpETbFC1X988VNBCCMoDOy8rW7VAWZ4jctAF+ziCbk0qdlw9epDXtTEfY8uiBSZdZVAvD/XNDmDjwQqbJZ6Me8n0XpOyoBadNY7QvYyx3w0d9yIXQonVUadAS6j2qsqV/vTUe3Q7RApMJL5WDwek+ATr0tOtQWTBvd42zE8s0PLchQKZg+gYvt+PGQAF0KLB87IKZCp42WjnH8vbEJfKhBnjzxhjfO2DXhP7/HFrUHk6MX/Cq2xp07MIXVlQdypjUznAGaSEapjPYfb7N929ZDc4jp7M9WCWfoZ+6ToZ96vEB7tM4f5chJ3Kp16dTUGoIXUurbgzhq4Ackz6K3IkX1EgqLnmqkS9Bzeqc6FW6kv1qyC0/P7TSqcPUMZ5L7T57GUEq2vAZLJwXtOBALHMxpQRQKr6osd6T64t1s/oe+Dmb8mEeQhQhRW+8DRKUKoo0Qka1WEfVC1tqyuj5hwEf5D7ZH39OOpDxXAAAAAElFTkSuQmCC",message:"Click or tap to upload an image"})}),Object(A.jsx)(Q.a.File,{id:"image-upload",accept:"image/*",onChange:e=>{e.target.files.length&&(URL.revokeObjectURL(d),c({...t,image:URL.createObjectURL(e.target.files[0])}))},ref:m})]}),Object(A.jsx)("div",{className:"d-md-none",children:b})]})}),Object(A.jsx)(T.a,{md:5,lg:4,className:"d-none d-md-block p-0 p-md-2",children:Object(A.jsx)(j.a,{className:i.a.Content,children:b})})]})})};var $=function(){return Object(A.jsxs)("div",{className:i.a.App,children:[Object(A.jsx)(k,{}),Object(A.jsxs)(j.a,{className:i.a.Main,children:[Object(A.jsxs)(S.Switch,{children:[Object(A.jsx)(S.Route,{exact:!0,path:"/",render:()=>Object(A.jsx)("h2",{children:"Home page"})}),Object(A.jsx)(S.Route,{exact:!0,path:"/signin",render:()=>Object(A.jsx)(P,{})}),Object(A.jsx)(S.Route,{exact:!0,path:"/signup",render:()=>Object(A.jsx)(q,{})}),Object(A.jsx)(S.Route,{exact:!0,path:"/movies/create",render:()=>Object(A.jsx)(z,{})}),Object(A.jsx)(S.Route,{render:()=>Object(A.jsx)("p",{children:"Page not found!"})})]}),Object(A.jsxs)("p",{children:["List of ",Object(A.jsx)(X.a,{to:"/movies",children:"movies"})]})]})]})};var ee=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,104)).then((a=>{let{getCLS:t,getFID:s,getFCP:c,getLCP:n,getTTFB:r}=a;t(e),s(e),c(e),n(e),r(e)}))};r.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(b.a,{children:Object(A.jsx)(B,{children:Object(A.jsx)($,{})})})}),document.getElementById("root")),ee()},15:function(e,a,t){e.exports={App:"App_App__16ZpL",Main:"App_Main__HQkvd"}},16:function(e,a,t){e.exports={Button:"Button_Button__27i9m",Wide:"Button_Wide__2ScDr",Blue:"Button_Blue__10GcT",BlueOutline:"Button_BlueOutline__YqCWO",Bright:"Button_Bright__1MBHR",Black:"Button_Black__2dCp7",BlackOutline:"Button_BlackOutline__I-kZ-"}},17:function(e,a,t){e.exports={Row:"SignInUpForm_Row__3PbVy",Input:"SignInUpForm_Input__3xaLZ",Header:"SignInUpForm_Header__3joQJ",Link:"SignInUpForm_Link__1BeMm",Container:"SignInUpForm_Container__2cuBp",SignInCol:"SignInUpForm_SignInCol__3ImPK",SignUpCol:"SignInUpForm_SignUpCol__28o4y"}},33:function(e,a,t){e.exports={Container:"MovieCreateEditForm_Container__2wBXC"}},57:function(e,a,t){e.exports={Avatar:"Avatar_Avatar__196lW"}},61:function(e,a,t){e.exports={Asset:"Asset_Asset__1dBcX"}},68:function(e,a,t){},8:function(e,a,t){e.exports={NavBar:"NavBar_NavBar__1amC6",NavLink:"NavBar_NavLink__34ons",Active:"NavBar_Active__3PBZb"}}},[[101,1,2]]]);
//# sourceMappingURL=main.1940704d.chunk.js.map